<!--user一覧画面-->
<div class="container">
  <div class="row">
    <div class="col text-center my-5">
      <h2>Other User</h2>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <table class="table text-center mb-5">
        <tr><th></th><th>名前</th><th>性別</th><th>フォロー数</th><th>フォロワー数</th><th></th><th>登録日</th></tr>
        <% @users.each do |user| %>
        <!--自分を表示させない-->
        <% unless current_user == user %>
        <tr>
          <td>
            <%= link_to user_path(user) do %>
            <%= attachment_image_tag user, :profile_image, fallback: "no_image.jpg", :size =>'60x60' %>
            <% end %>
          </td>
          <td><%= link_to user.name, user_path(user) %></td>
          <td><%= user.gender %></td>
          <td id="followings_count_<%= user.id %>" >
            <!--＠userが何も入ってない場合はcurrent_user_idが入る-->
            <% user ||= current_user %>
            <%= link_to user.followings.count,user_follwings_path(user) %>
          </td>
          <td id="followers_count_<%= user.id %>">
            <% user ||= current_user %>
            <%= link_to user.followers.count,user_follwers_path(user) %>
          </td>
          <!--自分を表示させない-->
          <% unless current_user == user %>
          <td id="follow_button_<%= user.id %>"><%= render partial: 'relationships/follow_button', locals: {user: user} %></td>
          <% end %>
          <td><%= user.created_at.strftime('%Y/%m/%d') %></td>
        </tr>
        <% end %>
        <% end %>

      </table>
    </div>
  </div>
  <div class="row ml-5">
    <div class="col-2 mx-auto">
      <!--# gem kaminari ページネーション機能-->
      <%= paginate(@users) %>
    </div>
  </div>
</div>