<!--user一覧画面-->
<div class="container">
  <div class="row">
    <div class="col text-center my-5">
      <h2>Other User</h2>
    </div>
  </div>
  <div class="row">
    <div class="col text-right my-5">
      <%= render 'search' %>
    </div>
  </div>
   <div class="row">
    <% @users.each do |user| %>
    <!--自分を表示させない-->
    <% unless current_user == user %>
      <div class="col-md-3" style="text-align:center; padding-bottom:20px;">
        <div class="card-deck">
          <div class="card pt-4">
            <%= link_to user_path(user) do %>
              <%= attachment_image_tag user, :profile_image, fallback: "no_image.jpg", :size =>'60x60' %>
            <% end %>
              <div class="card-body text">
                <h4 class="card-title"><%= link_to user.name, user_path(user) %></h4>
                <p><%= user.gender %></p>
                <p id="followings_count_<%= user.id %>">
                  <!--＠userが何も入ってない場合はcurrent_user_idが入る-->
                  <% user ||= current_user %>
                  フォロー数 <%= link_to user.followings.count,user_follwings_path(user) %>
                </p>
                <p id="followers_count_<%= user.id %>">
                  <% user ||= current_user %>
                  フォロワー数 <%= link_to user.followers.count,user_follwers_path(user) %>
                </p>
                <p id="follow_button_<%= user.id %>">
                  <%= render partial: 'relationships/follow_button', locals: {user: user} %>
                </p>
              </div>
            </div>
        </div>
      </div>
    <% end %>
    <% end %>
  </div>
  <div class="row ml-5">
    <div class="col-2 mx-auto">
      <!--# gem kaminari ページネーション機能-->
      <%= paginate(@users) %>
    </div>
  </div>
</div>


